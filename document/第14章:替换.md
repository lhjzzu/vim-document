## 技巧87 结识substitute命令

substitute命令允许我们先查找一段文本，再用另一段文本将其替换掉。语法为
`:[range]s[ubstitute]/{pattern}/{string}/[flags]`

### 利用标志位调整substitute命令的行为

 1. 标志位`g` 使得subsititute命令在全局范围内执行
 2. 标志位`c` 让我们有机会可以确认或拒绝每一处修改
 3. 标志位`n` 会抑制正常的替换行为
 4. 标志位`e` 会屏蔽报错提示，例如找不到模式时，错误信息E486:找不到模式

### 替换域中额特殊字符

常用的替换域`{string}`的特殊字符表

```
符号                  描述
\r                   插入一个换行符
\t                   插入一个制表符
\\                   插入一个反斜杠
\1                   插入第一个子匹配
\2                   插入第二个子匹配
\0                   插入匹配模式的所有内容
&                    插入匹配模式的所有内容
~                    使用上一次调用 :substitute时的{string}
\={Vim script}       执行{Vim script}表达式，并将返回的结果作为替换{string}
``` 
## 技巧88 在文件范围内查找并替换每一处匹配

* `s/{pattern}/{string}`   替换当前行的第一处的匹配
* `s/{pattern}/{string}/g` 替换当前行的所有的匹配
* `%s/{pattern}/{string}/g` 替换所有行的所有的匹配



## 技巧89 手动控制每一次替换操作

* 标志位`c`手动控制每一次替换. 
* vim会为我们提示所有的选项 `y/n/a/q/l/^E/^Y`

```
选项         用途
y           替换此处匹配
n           忽略此处匹配
q           退出替换过程
l           "last" -- 替换此处后退出
a           "all" -- 替换此处与之后所有的匹配
<C-e>       向上滚动屏幕
<C-y>       向下滚动屏幕

```


## 技巧90  重用上次的查找模式 

* 将substitute命令的查找域留空，意味着Vim会重用上次的查找模式

## 技巧91 用寄存器的内容替换

我们可以把某段文本复制到寄存器中，然后再通过传值或引用的方式将寄存器中的内容应用至替换域

### 传值

* 通过 `<C-r>{register}`，可以将寄存器的内容插入到命令行.
 + 例如 `%s//<C-r>0/g` 将寄存器0中的内容放到替换域

### 引用

* `:%s//\=@0/g` 将寄存器0中的文本放到替换域
   + `\=`指示vim执行一段脚本.在vim脚本中，我们可以用`@{register}`来应用某个寄存器的内容


## 技巧92 重复上一次substitute命令


 1. `:&&`重复上次substitute命令，但只作用范围为当前行
 2. `:%&&`或 `g&`重复上次substitute命令，但作用范围整个文件
 3. `:'<,'>&&`重复上次substitute命令,但作用范围为高亮选区的内容
 
 
## 技巧93 使用子匹配重排CSV文件的字段

具体用到时，再了解

## 技巧94 在替换过程中执行算术运算

具体用到时，再了解

## 技巧95 交换两个或更多的单词

具体用到时，在了解，插件`Abolish.vim`可以方便的实现单词的交换
`:%S/{man,dog}/{dog,man}/g`

## 技巧96 在多个文件中执行查找与替换

substitute 命令通常只针对当前文件进行操作,如果想在整个工程范围内进行操作，那么需要进行一下命令组合.

1. `:args **/*.txt` 把当前工程中的所有文件加载到参数列表
2. `:argdo %s//Practical/ge` vim对所有这些文件执行substitute命令

