## 技巧72 调整查找模式大小写的敏感性

我们既可以全局性的调整Vim查找功能的大小写敏感性，也可以再每次查找时进行局部调整.


### 全局设置大小写敏感性

* 	`set ignorecase` Vim的查找模式将不区分大小写。但会影响vim的自动补全行为


###  每次查找时设置大小写敏感性

* `\c`让查找模式忽略大小写， `\C`让查找模式强制区分大小写。 这两者将会忽略全局的`ignorecase`设置
   + 忽略大小写查找`world` -> `/world\c`
   + 区分大小写查找`world` -> `/world\C`
   
### 启用更具智能的大小写敏感性设置

* `smartcase` 在查找模式中只要输入了一个大写字母，那么就按区分大小写查找。如果全是小写，那么则不区分大小写。 同样如果有`\c`,`\C`，则依然根据`\c`,`\C`来区分大小写


## 技巧73 按正则表达式查找时，使用\v模式开关

匹配十六进制颜色字符串,即匹配1个#字符以及紧随其后的3个或6个十六进制字符(0-9 a-f A-F)

### 用magic搜索模式查找十六进制颜色代码

* `/#\([0-9a-fA-F]\{6}\|[0-9a-fA-F]\{3}\)`
  + 方括号[]缺省具有特殊含义，不用转义符
  + 圆括号()前后都需要转义
  + 大括号{}只需为开括号转义,vim会自能识别闭括号


### 用very magic搜索模式查找十六进制颜色代码

* `\v` 模式开关统一所有特殊符号的规则。激活very magic搜索模式,即假定除`_`,大小写字符以及0到9之外的字符都具有特殊含义. 
* `/\v#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})`，此时的正则表达式表现的更像ruby,python,perl等

### 用十六进制字符类进一步优化模式

* `/\v#(\x{6}|\x{3})`
 + 字符类`\x`可以代替完整的字符集[0-9a-fA-F]


### 结论

```
模式                                     说明
#\([0-9a-fA-F]\{6}\|[0-9a-fA-F]\{3}\)    使用magic搜索时，必须转义(、)、|
                                         以及{字符，赋予它们特殊的含义


\v#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})       使用\v模式开关后，(、)、|
                                         以及{字符会表现出特殊含义
                                        
                                                                                
\v#(\x{6}|\x{3})                         使用\x字符类代替[0-9a-fA-F],
                                         进一步精简表达式
```

## 技巧74 按原义查找文本时，使用\V原义开关

`.`, `?`,`*`等等字符是具有特殊含义的，此时我们想要按原义查找时需要忽略其特殊含义.

* 查找原义字符串 `a.k.a.`
   + `/\Va.k.a.` => `-V`即可启用very nomagic原义开关，忽略字符的特殊含义。

## 技巧75 使用圆括号捕获子匹配

* `/\v<(\w+)\_s+\1>` 匹配类似`the the`等连续出现的单词
  + 任何圆括号匹配的文本都会被自动保存到临时的仓库。我们可以用`\1`引用这段被捕获的文本
  + 如果不止一个圆括号，可以用`\1`、`\2`，到`\9`,引用被每对()捕获的子匹配
  + `\0`永远会引用这个匹配

  
## 技巧76 界定单词的边界

vim的单词定界符可以指定单词从哪里开始到哪里结束

```
/the<CR> 进行查找时，可能会查找到these, they, their等等并不想要查找的单词
/\v<the><CR> 则只会匹配到the

在very magic搜索模式下，<>符号表示单词的定界符
在magic，nomagic，very nomagic模式下，<>需要被转义 \<\>
```

## 技巧77 界定匹配的边界

较为复杂,等到用到时详细了解

## 技巧78 转义问题字符

在下列文本中查找URL

```
Search items: [http://vimdoc.net/search?q=/\\][s]
...
s: http://vimdoc.net/search?q=/\\

```

* `"uyi[`将URL`http://vimdoc.net/search?q=/\\`复制到`寄存器u`中
* `/\V<C-r>u<CR>`只相当于`/\Vhttp://vimdoc.net/search?q=/\\`只能匹配到`http:`,因为`/`是正向查找的结束符

### 正向查找URL


* `/\Vhttp:\/\/vimdoc.net\/search?q=\/\\\\` 正确的表达式
  + 正向查找时需要转义`/`，因为`/`也是正向查找结束符。
  + `\`是转义字符，因此也要转义`\\`

### 反向查找URL

* `?\Vhttp://vimdoc.net/search\?q=/\\\\` 正确的表达式
  + 反向查找时需要转义`?`，因为`?`也是反向查找结束符。
  + 需要`\`是转义字符，因此也要转义`\\`


### 用编程的方式转义字符

1. `/\V<C-r>=escape(@u, '/\')` 即为`/\Vhttp:\/\/vimdoc.net\/search?q=\/\\\\`  正向查找
  + `/\V<C-r>=` vim从查找提示符的状态切换到表达寄存器的状态
  + `=escape(@u, '/\')` ,它会为每个`/`与`\`加上反斜杠`\`的前缀

2. `?\V<C-r>=escape(@u, '?\')` 即为`?\Vhttp://vimdoc.net/search\?q=/\\\\`表达式   反向查找
  + `?\V<C-r>=` vim从查找提示符的状态切换到表达寄存器的状态
  + `=escape(@u, '?\')` ,它会为每个`?`与`\`加上反斜杠`\`的前缀

  `<C-r>`即为 `Control + r`
  
